<!DOCTYPE html>
<html lang="en">
  {% load static %}
  <head>
    <!-- Required meta tags -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- SEO Meta Tags -->
    <meta name="description" content="Map Platform - A comprehensive platform for managing products, suppliers, and transportation pricing.">
    <meta property="og:title" content="Map Platform SMP">
    <meta property="og:description" content="Efficient platform for managing products, suppliers, and transportation pricing.">
    <meta property="og:image" content="https://your-image-url.com/thumbnail.jpg">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jsoneditor/9.10.0/jsoneditor.min.css" integrity="sha512-brXxIa/fpMfluh8HUWyrNssKy/H0oRzA0HhmipgfVwbXPamMUTZn1jEsvoGGwJYCRpSx4idujdul4vFwWgPROA==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <!-- Google Fonts for typography pairing -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;500;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">

    {% block css %}{% endblock css %}

    <style>
      /* Flexbox layout for body */
      html, body {
        height: 100%;
        display: flex;
        flex-direction: column;
      }

      body {
        background: url('https://source.unsplash.com/1600x900/?abstract') no-repeat center center fixed;
        background-size: cover;
        font-family: 'Montserrat', sans-serif;
        color: #343a40;
        background-blend-mode: overlay;
        background-color: rgba(255, 255, 255, 0.85);
      }

      /* Neumorphic Navbar */
      .navbar {
        background-color: #ffffff;
        box-shadow: 9px 9px 16px rgba(0, 0, 0, 0.15), -9px -9px 16px rgba(255, 255, 255, 0.7);
        padding: 10px 20px;
        border-radius: 12px;
        transition: background-color 0.5s ease;
      }

      .navbar-brand h3 {
        font-weight: bold;
        font-size: 1.8rem;
        color: #333333;
        margin-right: 20px;
        font-family: 'Playfair Display', serif;
      }

      .navbar-brand span {
        color: #ff4757;
      }

      .nav-link {
        color: #333333;
        font-size: 1rem;
        font-weight: 500;
        margin-right: 15px;
        transition: color 0.3s ease;
      }

      .nav-link:hover {
        color: #ff4757;
        text-shadow: 0 0 10px rgba(255, 71, 87, 0.8);
      }

      .navbar-toggler {
        border: none;
        font-size: 1.5rem;
        color: #333333;
      }

      /* Button Styling */
      .btn-custom {
        border-radius: 50px;
        padding: 10px 20px;
        font-size: 0.9rem;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.15), -5px -5px 15px rgba(255, 255, 255, 0.7);
      }

      .btn-success:hover, .btn-primary:hover {
        background-color: #333333;
        box-shadow: inset 5px 5px 15px rgba(0, 0, 0, 0.3), inset -5px -5px 15px rgba(255, 255, 255, 0.2);
      }

      /* Neumorphic Form Inputs */
      input, select, textarea {
        border-radius: 10px;
        border: none;
        padding: 15px;
        width: 100%;
        margin-bottom: 20px;
        box-shadow: inset 4px 4px 8px rgba(0, 0, 0, 0.1), inset -4px -4px 8px rgba(255, 255, 255, 0.7);
        background-color: #e0e0e0;
        transition: box-shadow 0.3s ease;
      }

      input:focus, select:focus, textarea:focus {
        box-shadow: 4px 4px 12px rgba(0, 0, 0, 0.2), -4px -4px 12px rgba(255, 255, 255, 0.8);
        outline: none;
      }

      /* Body Container */
      .container {
        margin-top: 50px;
        max-width: 100%;
        padding: 20px;
        background-color: rgba(255, 255, 255, 0.95);
        border-radius: 15px;
        box-shadow: 9px 9px 16px rgba(0, 0, 0, 0.15), -9px -9px 16px rgba(255, 255, 255, 0.7);
        flex: 1; /* Ensures this takes available space */
      }

      /* Footer Styling */
      footer {
        background-color: #343a40;
        color: #fff;
        padding: 20px;
        text-align: center;
        width: 100%;
        margin-top: auto; /* Push footer to the bottom */
        box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2), -5px -5px 15px rgba(255, 255, 255, 0.3);
      }

      .footer-icons a {
        color: #fff;
        margin: 0 10px;
        font-size: 1.2rem;
        transition: color 0.3s ease;
      }

      .footer-icons a:hover {
        color: #ff4757;
      }

      /* Dark Mode Toggle */
      .dark-mode-toggle {
        position: fixed;
        bottom: 20px;
        right: 20px;
        background-color: #007bff;
        color: white;
        padding: 10px 15px;
        border-radius: 50px;
        font-size: 0.9rem;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 5px 5px 15px rgba(0, 0, 0, 0.2), -5px -5px 15px rgba(255, 255, 255, 0.3);
      }

      /* Dark Mode Styling */
      .dark-mode {
        background-color: #343a40;
        color: #ffffff;
      }

      .dark-mode .navbar {
        background-color: #555555;
      }

      .dark-mode input, .dark-mode select, .dark-mode textarea {
        background-color: #555555;
        color: #ffffff;
      }

      .dark-mode .container {
        background-color: rgba(255, 255, 255, 0.1);
        color: #ffffff;
      }

      /* Responsive Styles */
      @media (max-width: 768px) {
        .navbar-brand h3 {
          font-size: 1.5rem;
        }

        .nav-link {
          font-size: 0.9rem;
        }

        .btn-custom {
          padding: 8px 15px;
          font-size: 0.8rem;
        }

        .footer-icons a {
          font-size: 1rem;
        }

        .container {
          padding: 15px;
        }
      }

      @media (max-width: 576px) {
        .navbar-brand h3 {
          font-size: 1.2rem;
        }

        .btn-custom {
          padding: 5px 10px;
          font-size: 0.75rem;
        }

        .footer-icons a {
          font-size: 0.9rem;
        }

        .container {
          padding: 10px;
        }
      }

      /* Hide the specific element in mobile mode */
      @media (max-width: 767px) {
        .element-class {
          display: none;
        }
      }
    </style>

    <title>Map Platform - SMP France{% block title %}{% endblock title %}</title>
  </head>

  <body>
    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid">
        <a class="navbar-brand" href="/"><h3>Map<span>.</span></h3></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"><i class="fa fa-bars"></i></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ml-auto">
            {% if request.user.is_superuser %}
            <li class="nav-item">
              <a class="nav-link" href="{% url 'products:list' %}">Products</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'accounts:list' %}">Manage Users</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="{% url 'countries:transportation_setup' %}">Transportation Price Setup</a>
            </li>
            {% endif %}
            <li class="nav-item">
              <a class="nav-link" href="{% url 'suppliers:list' %}">Suppliers</a>
            </li>
          </ul>

          <div class="form-inline my-2 my-lg-0">
            <div class="btn-group mr-2">
              {% if request.user.is_superuser %}
              <a class="btn btn-success btn-custom" href="{% url 'notifications:source_list' %}">Notifications(Sourcing)</a>
              <a class="btn btn-primary btn-custom" href="{% url 'notifications:sales_list' %}">Notifications(Sales)</a>
              {% elif request.user.team == 'sourcing' %}
              <a class="btn btn-success btn-custom" href="{% url 'notifications:source_list' %}">Notifications(Source)</a>
              {% elif request.user.team == 'sales' %}
              <a class="btn btn-primary btn-custom" href="{% url 'notifications:sales_list' %}">Notifications(Sales)</a>
              {% endif %}
            </div>

            <div class="btn-group">
              <button type="button" class="btn btn-warning btn-custom dropdown-toggle" data-toggle="dropdown">{{ request.user.username.title }}</button>
              <div class="dropdown-menu dropdown-menu-right">
                <a class="dropdown-item" href="{% url 'accounts:user_profile' %}">Profile</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="{% url 'accounts:logout' %}">Logout</a>
              </div>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <!-- Body content -->
    <div class="container">
      {% block body %}
      {% endblock body %}
    </div>

    <!-- Footer -->
    <footer>
      <div class="footer-icons">
        <a href="https://github.com" class="fa fa-github"></a>
        <a href="https://twitter.com" class="fa fa-twitter"></a>
        <a href="https://instagram.com" class="fa fa-instagram"></a>
        <a href="https://linkedin.com" class="fa fa-linkedin"></a>
      </div>
      <p>&copy; 2024 Map Platform SMP</p>
    </footer>

    <!-- Dark Mode Toggle -->
    <div class="dark-mode-toggle" onclick="toggleDarkMode()">Dark Mode</div>

    <script>
      // Dark Mode Toggle with localStorage
      function toggleDarkMode() {
        document.body.classList.toggle('dark-mode');
        const isDarkMode = document.body.classList.contains('dark-mode');
        localStorage.setItem('dark-mode', isDarkMode ? 'enabled' : 'disabled');
      }

      window.onload = () => {
        const isDarkMode = localStorage.getItem('dark-mode') === 'enabled';
        if (isDarkMode) {
          document.body.classList.add('dark-mode');
        }
      }
    </script>

    <!-- Bootstrap JS and dependencies -->
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jsoneditor/9.10.0/jsoneditor.min.js" integrity="sha512-ruQAvFENqNvZOgUR7kldDYoQQLXs/CTx/ZJJhDpGKB5iqrhdq92S+P6sYsl6HCE+xTIFDhDo2FiZ3PJGKPWjWg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    {% block js %}
    {% endblock js %}
  </body>
</html>
